import tkinter as tk
from tkinter import messagebox
from ..BancoDados import Banco_de_dados as bd

def create_login_screen(on_success):
    """Cria a tela de login.
    
    Args:
        on_success (function): Função chamada quando o login for bem-sucedido.
    """
    root = tk.Tk()
    root.title("Tela de Login")
    root.geometry("300x200")
    root.resizable(False, False)

    def login():
        username = username_entry.get()
        password = password_entry.get()
        
        # Validação simples
        if bd.verifica_funcionario(username, password) == True:
            messagebox.showinfo("Login bem-sucedido", "Bem-vindo a Felix Confecção!")
            root.destroy()  # Fecha a janela de login
            on_success()  # Chama a função de sucesso
        else:
            messagebox.showerror("Erro", "Usuário ou senha incorretos.")
    
    tk.Label(root, text="Usuário:").pack(pady=5)
    username_entry = tk.Entry(root)
    username_entry.pack(pady=5)

    tk.Label(root, text="Senha:").pack(pady=5)
    password_entry = tk.Entry(root, show="*")
    password_entry.pack(pady=5)

    tk.Button(root, text="Login", command=login).pack(pady=20)
    return root